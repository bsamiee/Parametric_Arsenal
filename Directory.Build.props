<Project>

  <PropertyGroup Label="Paths">
    <RepositoryRoot>$(MSBuildThisFileDirectory)</RepositoryRoot>
    <ArtifactsPath>$(RepositoryRoot)artifacts</ArtifactsPath>
    <BaseOutputPath>$(ArtifactsPath)\$(MSBuildProjectName)\</BaseOutputPath>
    <SolutionDir>$(RepositoryRoot)</SolutionDir>
    <SolutionName>Parametric_Arsenal</SolutionName>
    <SolutionExt>.slnx</SolutionExt>
  </PropertyGroup>

  <PropertyGroup Label="Language">
    <TargetFramework>net8.0</TargetFramework>
    <LangVersion>preview</LangVersion>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <Features>strict</Features>
    <PlatformTarget>AnyCPU</PlatformTarget>
    <Prefer32Bit>false</Prefer32Bit>
  </PropertyGroup>

  <PropertyGroup Label="Build">
    <UseArtifactsOutput>true</UseArtifactsOutput>
    <IsPackable>false</IsPackable>
    <IsPublishable>false</IsPublishable>
    <RestorePackagesWithLockFile>true</RestorePackagesWithLockFile>
    <DisableImplicitNuGetFallbackFolder>true</DisableImplicitNuGetFallbackFolder>
    <Deterministic>true</Deterministic>
    <DebugType>portable</DebugType>
    <DebugSymbols>true</DebugSymbols>
  </PropertyGroup>

  <PropertyGroup Label="Analysis">
    <EnableNETAnalyzers>true</EnableNETAnalyzers>
    <AnalysisLevel>latest-recommended</AnalysisLevel>
    <AnalysisMode>Default</AnalysisMode>
    <RunAnalyzers>true</RunAnalyzers>
    <RunAnalyzersDuringLiveAnalysis>true</RunAnalyzersDuringLiveAnalysis>
    <RunAnalyzersDuringBuild>true</RunAnalyzersDuringBuild>
    <EnforceCodeStyleInBuild>true</EnforceCodeStyleInBuild>
    <ReportAnalyzer>false</ReportAnalyzer>
    <TreatWarningsAsErrors>false</TreatWarningsAsErrors>
  </PropertyGroup>

  <PropertyGroup Label="Debug" Condition="'$(Configuration)'=='Debug'">
    <Optimize>false</Optimize>
    <CheckForOverflowUnderflow>true</CheckForOverflowUnderflow>
  </PropertyGroup>

  <PropertyGroup Label="Release" Condition="'$(Configuration)'=='Release'">
    <Optimize>true</Optimize>
    <CheckForOverflowUnderflow>false</CheckForOverflowUnderflow>
    <ConcurrentBuild>true</ConcurrentBuild>
    <ContinuousIntegrationBuild>true</ContinuousIntegrationBuild>
    <ProduceReferenceAssembly>true</ProduceReferenceAssembly>
    <TieredCompilation>true</TieredCompilation>
    <ReadyToRun>true</ReadyToRun>
  </PropertyGroup>

  <ItemGroup Label="Analyzers">
    <PackageReference Include="IDisposableAnalyzers" Version="4.0.8" PrivateAssets="all" />
    <PackageReference Include="Roslynator.Analyzers" Version="4.14.1" PrivateAssets="all" />
    <PackageReference Include="Meziantou.Analyzer" Version="2.0.250" PrivateAssets="all" />
  </ItemGroup>

  <PropertyGroup Label="SDKVersions">
    <RhinoVersion>8.24.25281.15001</RhinoVersion>
    <IsGrasshopperPlugin Condition="'$(IsGrasshopperPlugin)'==''">false</IsGrasshopperPlugin>
  </PropertyGroup>

  <ItemGroup Label="SDKReferences">
    <PackageReference Include="RhinoCommon" Version="$(RhinoVersion)">
      <PrivateAssets>all</PrivateAssets>
      <ExcludeAssets>runtime</ExcludeAssets>
    </PackageReference>
    <PackageReference Include="Grasshopper" Version="$(RhinoVersion)" Condition="'$(IsGrasshopperPlugin)'=='true'">
      <PrivateAssets>all</PrivateAssets>
      <ExcludeAssets>runtime</ExcludeAssets>
    </PackageReference>
  </ItemGroup>

  <ItemGroup Label="SharedReferences" Condition="'$(MSBuildProjectName)' == 'Arsenal.Tests.Shared'">
    <ProjectReference Include="../../libs/core/Core.csproj" />
  </ItemGroup>

  <PropertyGroup Label="Tests" Condition="'$(IsTestProject)' == 'true'">
    <GenerateDocumentationFile>false</GenerateDocumentationFile>
  </PropertyGroup>

  <ItemGroup Label="TestReferences" Condition="'$(IsTestProject)' == 'true' AND '$(MSBuildProjectName)' != 'Arsenal.Tests.Shared'">
    <ProjectReference Include="../shared/Arsenal.Tests.Shared.csproj" />
    <ProjectReference Include="../../libs/core/Core.csproj" />
  </ItemGroup>

  <PropertyGroup Label="RhinoTests" Condition="'$(TestFramework)' == 'NUnit'">
    <RhinoSystemDirectory Condition="'$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Windows)))' == 'true'">C:\Program Files\Rhino 8\System</RhinoSystemDirectory>
    <RhinoSystemDirectory Condition="'$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::OSX)))' == 'true'">/Applications/Rhino 8.app/Contents/Frameworks</RhinoSystemDirectory>
  </PropertyGroup>

  <ItemGroup Label="RhinoReferences" Condition="'$(TestFramework)' == 'NUnit' AND '$(TargetFramework)' == 'net8.0'">
    <Reference Include="$(RhinoSystemDirectory)\netcore\RhinoCommon.dll" Private="False" Condition="'$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Windows)))' == 'true'" />
    <Reference Include="$(RhinoSystemDirectory)/RhinoCommon.dll" Private="False" Condition="'$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::OSX)))' == 'true'" />
  </ItemGroup>

  <ItemGroup Label="TestFrameworks" Condition="'$(IsTestProject)' == 'true'">
    <PackageReference Include="coverlet.collector" Version="6.0.4" PrivateAssets="all" />
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="18.0.0" />
    <PackageReference Include="xunit" Version="2.9.3" Condition="'$(TestFramework)' == 'xUnit'" />
    <PackageReference Include="xunit.runner.visualstudio" Version="3.1.5" PrivateAssets="all" Condition="'$(TestFramework)' == 'xUnit'" />
    <PackageReference Include="CsCheck" Version="4.4.1" Condition="'$(TestFramework)' == 'xUnit'" />
    <PackageReference Include="rhino3dm" Version="8.17.0" Condition="'$(TestFramework)' == 'xUnit'" />
    <PackageReference Include="NUnit" Version="4.4.0" Condition="'$(TestFramework)' == 'NUnit'" />
    <PackageReference Include="NUnit3TestAdapter" Version="5.2.0" PrivateAssets="all" Condition="'$(TestFramework)' == 'NUnit'" />
    <PackageReference Include="Rhino.Testing" Version="8.0.17-beta" Condition="'$(TestFramework)' == 'NUnit'" />
  </ItemGroup>

</Project>
